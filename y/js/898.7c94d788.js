"use strict";(self["webpackChunkdelivery_vue"]=self["webpackChunkdelivery_vue"]||[]).push([[898],{7845:function(t,a,s){s.d(a,{Z:function(){return f}});var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return t.isReject?t._e():s("article",{staticClass:"article-ask-business mt-4"},[s("div",{staticClass:"accordion",attrs:{id:"accordionExample"}},[s("div",{staticClass:"accordion-item"},[s("h2",{staticClass:"accordion-header",attrs:{id:["heading"+t.ask.numObject.tittle]}},[s("button",{staticClass:"accordion-button collapsed",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":["#collapse"+t.ask.numObject.tittle],"aria-expanded":"false","aria-controls":["collapse"+t.ask.numObject.tittle]}},[s("h1",[t._v("Pedidos")])])]),s("div",{staticClass:"accordion-collapse collapse",attrs:{id:["collapse"+t.ask.numObject.tittle],"aria-labelledby":["heading"+t.ask.numObject.tittle],"data-bs-parent":"#accordionExample"}},[s("div",{staticClass:"accordion-body"},t._l(t.ask.pedido,(function(a,e){return s("h2",{key:e,staticClass:"h2-productName"},[t._v(" "+t._s(a.productName)+" "),1===a.productQuantity?s("span",{staticClass:"spanTittle"},[t._v(" ("+t._s(a.productQuantity)+" unidad)")]):s("span",{staticClass:"spanTittle"},[t._v(" ("+t._s(a.productQuantity)+" unidades) ")])])})),0)])]),0!=t.notes.length?s("div",{staticClass:"accordion-item"},[s("h2",{staticClass:"accordion-header",attrs:{id:["heading"+t.ask.numObject.notes]}},[s("button",{staticClass:"accordion-button collapsed",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":["#collapse"+t.ask.numObject.notes],"aria-expanded":"false","aria-controls":["collapse"+t.ask.numObject.notes]}},[s("h3",[t._v("Notas")])])]),s("div",{staticClass:"accordion-collapse collapse",attrs:{id:["collapse"+t.ask.numObject.notes],"aria-labelledby":["heading"+t.ask.numObject.notes],"data-bs-parent":"#accordionExample"}},[s("div",{staticClass:"accordion-body accordion-notes"},t._l(t.notes,(function(a,e){return s("p",{key:e,staticClass:"notes-p"},[s("span",{staticClass:"spanTittle"},[t._v(" "+t._s(a.product)+" ")]),t._v(t._s(a.note))])})),0)])]):t._e()]),s("div",{staticClass:"notes-ask-business"},[s("p",[t._v("Repartidor")]),void 0!=t.ask.riderName||null!=t.ask.riderName?s("p",[t._v(t._s(t.ask.riderName))]):s("p",[t._v("No aceptado aún")])]),s("div",{staticClass:"total-price-ask-business"},[s("p",[t._v("Total")]),s("p",[t._v("$"+t._s(t.ask.riderDbt))])]),s("PartnerAceptReject",{attrs:{reject:t.rejectAsk,ask:t.askObj}})],1)},i=[],n=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[t.noChoice&&!t.finalized?s("div",{staticClass:"acept-div"},[s("button",{staticClass:"reject",on:{click:t.reject}},[t._v("Rechazar")]),s("button",{staticClass:"acept",on:{click:t.acept}},[t._v("Aceptar")])]):t._e(),t.acepted&&!t.finalized?s("div",{staticClass:"acept-div"},[s("button",{staticClass:"acept"},[t._v("Aceptado")])]):t._e(),t.finalized?s("div",{staticClass:"acept-div"},[s("button",{staticClass:"acept"},[t._v("Entregado")])]):t._e()])},r=[],o={name:"PartnerAceptReject",data(){let t=!0,a=!1,s=!1;return{noChoice:t,acepted:a,finalized:s}},props:["reject","ask"],methods:{acept:function(){var t=this.ask;t.estado="Buscando repartidores",t.aceptado=!0,firebase.database().ref(`pedidos/${this.ask.clientID}/${this.ask.askID}`).set(t),this.acepted=!0,this.noChoice=!1},isAcept:function(){window.setTimeout((t=>{firebase.database().ref(`pedidos/${this.ask.clientID}/${this.ask.askID}`).on("value",(t=>{!0===t.val().aceptado&&null!=t.val().aceptado&&(this.acepted=!0,this.noChoice=!1),"Entregado"!==t.val().estado&&"Retirado del local, en camino"!==t.val().estado||(this.finalized=!0)}))}),10)}},mounted(){this.isAcept()}},c=o,l=s(1001),d=(0,l.Z)(c,n,r,!1,null,null,null),u=d.exports,v={name:"PartnerAsk",components:{PartnerAceptReject:u},data(){let t=!1,a=[],s=0,e={};return{isReject:t,notes:a,price:s,askObj:e}},props:["refresh","ask"],methods:{rejectAsk:function(){var t=this.ask;t.estado="Rechazado por el local",firebase.database().ref(`pedidos/${this.ask.clientID}/${this.ask.askID}`).set(t),this.isReject=!0,this.refresh()},askItem:function(){console.log(this.ask)},filtrerAndOperations:function(){this.price=0,null!=this.ask&&void 0!=this.ask&&this.ask.pedido.forEach((t=>{if(null!=t.userNotes&&void 0!=t.userNotes&&""!=t.userNotes){var a={note:t.userNotes,product:t.productName};this.notes.push(a)}this.price+=parseInt(t.productPrice)*parseInt(t.productQuantity),this.askObj=this.ask,console.log(this.ask)}))}},mounted(){this.askItem(),this.filtrerAndOperations()}},p=v,h=(0,l.Z)(p,e,i,!1,null,"2b70d94c",null),f=h.exports},5389:function(t,a,s){s.d(a,{Z:function(){return l}});var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("nav",{staticClass:"navbar navbar-light fixed-top"},[s("div",{staticClass:"container-fluid"},[s("h2",{staticClass:"navbar-brand"},[t._v(t._s(t.tittle))]),t._m(0),s("div",{staticClass:"offcanvas offcanvas-end",staticStyle:{visibility:"hidden"},attrs:{tabindex:"-1",id:"offcanvasNavbar","aria-labelledby":"offcanvasNavbarLabel","aria-hidden":"true"}},[t._m(1),s("div",{staticClass:"nav-container-partner"},[s("ul",{staticClass:"navbar-nav mt-4"},[s("li",{staticClass:"nav-item",on:{click:function(a){return t.goTo("product")}}},[s("div",{staticClass:"icon home"}),s("a",{staticClass:"nav-link",attrs:{"aria-current":"page"}},[t._v("Productos")])]),s("li",{staticClass:"nav-item",on:{click:function(a){return t.goTo("asks")}}},[s("div",{staticClass:"icon ask"}),s("a",{staticClass:"nav-link"},[t._v("Pedidos")])]),s("li",{staticClass:"nav-item padding-correction",on:{click:function(a){return t.goTo("history")}}},[s("div",{staticClass:"icon history"}),s("a",{staticClass:"nav-link"},[t._v("Historial")])])]),s("div",{staticClass:"logOutContainer",attrs:{"data-v-79df3b98":""}},[s("button",{attrs:{"data-v-79df3b98":""},on:{click:t.logOut}},[s("span",{attrs:{"data-v-79df3b98":""}},[t._v("Cerrar Sesión")])])])])])])])},i=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasNavbar","aria-controls":"offcanvasNavbar"}},[s("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"offcanvas-header"},[s("h5",{staticClass:"offcanvas-title",attrs:{id:"offcanvasNavbarLabel"}},[t._v("Mi Barrio")]),s("button",{staticClass:"btn-close text-reset",attrs:{type:"button","data-bs-dismiss":"offcanvas","aria-label":"Close"}})])}],n={name:"PartnerNav",props:["tittle"],methods:{goTo:function(t){"product"===t?this.$router.push({name:"partnerIndex"}):"history"===t?this.$router.push({name:"PartnerHistory"}):"asks"===t&&this.$router.push({name:"PartnerAsks"})},overflowSolve:function(){var t=document.querySelector("#offcanvasNavbar"),a=document.querySelector("body");"visible"!=t.style.visibility&&(a.style.overflow="auto")},logOut:function(){firebase.auth().signOut().then((()=>{this.$router.push("/PartnerLogin")})).catch((t=>{console.log(`Ocurrio un error, el error es ${t}`)}))}},mounted(){this.overflowSolve()}},r=n,o=s(1001),c=(0,o.Z)(r,e,i,!1,null,"061afba2",null),l=c.exports},5898:function(t,a,s){s.r(a),s.d(a,{default:function(){return u}});var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("header",[s("PartnerNav",{attrs:{tittle:"Historial"}})],1),s("section",{staticClass:"d-flex flex-column section-container"},[t._l(t.asks,(function(a,e){return s("PartnerAsk",{key:e,attrs:{refresh:t.refresh,ask:a}})})),0===t.asks.length?s("article",{staticClass:"article-ask-business mt-4"},[s("h2",[t._v("No hay pedidos para mostrar")])]):t._e()],2)])},i=[],n=s(5389),r=s(7845),o={name:"PartnerHistory",components:{PartnerNav:n.Z,PartnerAsk:r.Z},data(){let t=!1,a=[];return{noAskToShow:t,asks:a}},methods:{refresh:function(){firebase.auth().onAuthStateChanged((t=>{t&&(this.user=t,firebase.database().ref("pedidos").on("value",(a=>{let s=[];Object.values(a.val()).forEach((a=>{Object.values(a).forEach((a=>{a.restaurant!==t.displayName.split(" ").join("")||"Retirado del local, en camino"!==a.estado&&"Entregado"!==a.estado||"Rechazado por el local"==a.estado||s.push(a)}))}));var e=[];if(0!=s.length)for(;;){var i=parseInt(100*Math.random());if(e.includes(i)||e.push(i),parseInt(3*s.length)===e.length)break}for(var n=0;n<s.length;n++){var r={tittle:e[n],notes:""};s[n].numObject=r}var o=0;for(n=s.length;n<3*e.length;n++){if(o++,void 0===s[o]||null===s[o])break;s[o].numObject.notes=e[n]}this.asks=s})))}))},isLogin:function(){firebase.auth().onAuthStateChanged((t=>{t?firebase.database().ref("USERSrestaurantes").on("value",(a=>{var s=a.val(),e=!1;s.forEach((a=>{a.mail.toLowerCase()===t.email&&(this.user=t,this.isLogin=!0,e=!0)})),e||this.$router.push("/PartnerLogin")})):this.$router.push("/PartnerLogin")}))}},mounted(){this.isLogin(),this.refresh()}},c=o,l=s(1001),d=(0,l.Z)(c,e,i,!1,null,null,null),u=d.exports}}]);
//# sourceMappingURL=898.7c94d788.js.map