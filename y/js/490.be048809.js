"use strict";(self["webpackChunkdelivery_vue"]=self["webpackChunkdelivery_vue"]||[]).push([[490],{5389:function(t,e,a){a.d(e,{Z:function(){return l}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-light fixed-top"},[a("div",{staticClass:"container-fluid"},[a("h2",{staticClass:"navbar-brand"},[t._v(t._s(t.tittle))]),t._m(0),a("div",{staticClass:"offcanvas offcanvas-end",staticStyle:{visibility:"hidden"},attrs:{tabindex:"-1",id:"offcanvasNavbar","aria-labelledby":"offcanvasNavbarLabel","aria-hidden":"true"}},[t._m(1),a("div",{staticClass:"nav-container-partner"},[a("ul",{staticClass:"navbar-nav mt-4"},[a("li",{staticClass:"nav-item",on:{click:function(e){return t.goTo("product")}}},[a("div",{staticClass:"icon home"}),a("a",{staticClass:"nav-link",attrs:{"aria-current":"page"}},[t._v("Productos")])]),a("li",{staticClass:"nav-item",on:{click:function(e){return t.goTo("asks")}}},[a("div",{staticClass:"icon ask"}),a("a",{staticClass:"nav-link"},[t._v("Pedidos")])]),a("li",{staticClass:"nav-item padding-correction",on:{click:function(e){return t.goTo("history")}}},[a("div",{staticClass:"icon history"}),a("a",{staticClass:"nav-link"},[t._v("Historial")])])]),a("div",{staticClass:"logOutContainer",attrs:{"data-v-79df3b98":""}},[a("button",{attrs:{"data-v-79df3b98":""},on:{click:t.logOut}},[a("span",{attrs:{"data-v-79df3b98":""}},[t._v("Cerrar SesiÃ³n")])])])])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasNavbar","aria-controls":"offcanvasNavbar"}},[a("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"offcanvas-header"},[a("h5",{staticClass:"offcanvas-title",attrs:{id:"offcanvasNavbarLabel"}},[t._v("Mi Barrio")]),a("button",{staticClass:"btn-close text-reset",attrs:{type:"button","data-bs-dismiss":"offcanvas","aria-label":"Close"}})])}],i={name:"PartnerNav",props:["tittle"],methods:{goTo:function(t){"product"===t?this.$router.push({name:"partnerIndex"}):"history"===t?this.$router.push({name:"PartnerHistory"}):"asks"===t&&this.$router.push({name:"PartnerAsks"})},overflowSolve:function(){var t=document.querySelector("#offcanvasNavbar"),e=document.querySelector("body");"visible"!=t.style.visibility&&(e.style.overflow="auto")},logOut:function(){firebase.auth().signOut().then((()=>{this.$router.push("/PartnerLogin")})).catch((t=>{console.log(`Ocurrio un error, el error es ${t}`)}))}},mounted(){this.overflowSolve()}},o=i,n=a(1001),c=(0,n.Z)(o,r,s,!1,null,"061afba2",null),l=c.exports},8155:function(t,e,a){a.d(e,{Z:function(){return l}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"error-container"},[a("button",{staticClass:"icon exit exit-modal-add",staticStyle:{padding:"5%"},on:{click:t.closeButton}}),a("h3",[t._v(t._s(t.message))])])},s=[],i={name:"ErrorMessage",props:["message","close"],methods:{hide:function(){let t=document.querySelector(".error-container");window.setTimeout((e=>{t.style.animation="hide .5s"}),3e3),window.setTimeout((e=>{t.style.animation="",this.close()}),3400)},closeButton:function(){let t=document.querySelector(".error-container");t.style.animation="",this.close()}},mounted(){this.hide()}},o=i,n=a(1001),c=(0,n.Z)(o,r,s,!1,null,null,null),l=c.exports},6490:function(t,e,a){a.r(e),a.d(e,{default:function(){return k}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("header",[a("PartnerNav",{attrs:{tittle:"Productos"}})],1),a("section",{staticClass:"body-restaurant section-container"},[a("section",{staticClass:"restaurantFood"},t._l(t.food,(function(e,r){return a("itemEdit",{key:r,attrs:{product:e,resto:t.restoObject,refresh:t.completePage}})})),1),0!=t.drinks.length?a("section",{staticClass:"restaurantDrinks"},[a("h2",[t._v("Bebidas")]),t._l(t.drinks,(function(e,r){return a("itemEdit",{key:r,attrs:{product:e,resto:t.restoObject,refresh:t.completePage}})}))],2):t._e(),a("article",{staticClass:"more d-flex"},[a("button",{staticClass:"button-more-products",on:{click:function(e){t.showMoreProducts=!0}}})])]),a("MoreProducts",{attrs:{show:t.showMoreProducts,hide:t.hideMoreProducts,resto:t.restoObject,refresh:t.completePage}})],1)},s=[],i=a(5389),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"article-product-container"},[a("article",{staticClass:"article-product"},[a("div",{staticClass:"product-photo product-photo-restaurant"},[a("img",{attrs:{"data-productimg":"",src:[t.product.img],alt:""}})]),a("div",{staticClass:"product-container product-container-restaurant"},[a("div",[a("p",{staticClass:"p-product",attrs:{"data-productname":""}},[t._v(t._s(t.product.nombre))]),a("button",{staticClass:"button-edit icon pencil",on:{click:function(e){t.editModal=!0}}})]),a("div",[a("h6",{staticClass:"price-item"},[t._v("$"),a("span",{attrs:{"data-productprice":""}},[t._v(t._s(t.product.costo))])])])])]),t.editModal?a("div",{staticClass:"edit-modal"},[a("div",{staticClass:"exit-modal"},[a("h4",[t._v("Editar")]),a("button",{staticClass:"icon exit",on:{click:t.quit}})]),a("div",{staticClass:"edit-container"},[a("h5",[t._v("Editar titulo")]),a("div",{staticClass:"tittle-edit-container"},[a("input",{attrs:{type:"text",name:"tittle",placeholder:"Ingresar cambio"}}),a("button",{on:{click:function(e){return t.editProduct("tittle")}}},[t._v("Guardar")])])]),a("div",{staticClass:"edit-container"},[a("h5",[t._v("Editar precio")]),a("div",{staticClass:"tittle-edit-container"},[a("input",{attrs:{type:"number",name:"price",placeholder:"Ingresar cambio"}}),a("button",{on:{click:function(e){return t.editProduct("price")}}},[t._v("Guardar")])])]),a("div",{staticClass:"edit-container"},[a("h5",[t._v("Editar imagen")]),a("div",{staticClass:"upload-image"},[a("div",{staticClass:"charge-div",style:{width:t.percentajeWidth}}),a("input",{attrs:{type:"file"},on:{change:t.editImage}}),a("h4",[t._v(t._s(t.percentaje))])])]),a("div",{staticClass:"edit-container"},[a("button",{staticClass:"detele-product",on:{click:t.deteleProduct}},[t._v("Eliminar producto")])])]):t._e()])},n=[],c={name:"itemEdit",props:["product","resto","refresh"],data(){let t=!1,e=[],a="Seleccionar Archivo",r="0%",s="";return{editModal:t,restoArray:e,percentaje:a,percentajeWidth:r,imgLink:s}},methods:{quit:function(){var t=document.querySelector(".edit-modal");t.style.animation="closeCart .5s",window.setTimeout((e=>{t.style.animation="",this.editModal=!1}),400)},editProduct:function(t){this.restoArray=this.resto;let e=document.querySelector("input[name='tittle'"),a=document.querySelector("input[name='price'");for(var r=this.restoArray.length-1;r>=0;r--)this.restoArray[r].nombre===this.product.nombre&&this.restoArray[r].costo===this.product.costo&&("tittle"===t?this.restoArray[r].nombre=e.value:"price"===t?this.restoArray[r].costo=parseInt(a.value):"image"===t&&(this.restoArray[r].img=this.imgLink));console.log(this.restoArray),firebase.database().ref(`restaurantes/${this.restoArray[0]}`).set(this.restoArray),this.refresh(),this.editModal=!1},deteleProduct:function(){this.restoArray=this.resto;let t=[];t=this.restoArray.filter((t=>t.nombre!=this.product.nombre)),firebase.database().ref(`restaurantes/${this.restoArray[0]}`).set(t),this.refresh(),this.editModal=!1},editImage:function(){var t=document.querySelector("input[type='file']"),e=(new Date).getTime();let a=t.files[0];try{let t=firebase.storage().ref(`images/${e}`),r=t.put(a);r.on("state_changed",(t=>{this.percentaje=t.bytesTransferred/t.totalBytes*100+"%",this.percentajeWidth=t.bytesTransferred/t.totalBytes*100+"%"})),r.on("load",(e=>{t.getDownloadURL().then((t=>{this.imgLink=t,this.editProduct("image"),this.percentaje="Seleccionar archivo",this.percentajeWidth="0%"}))}))}catch(r){console.log(r)}}}},l=c,d=a(1001),u=(0,d.Z)(l,o,n,!1,null,"6cfa9e16",null),h=u.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("div",{staticClass:"modal-more-products"},[a("h2",{staticClass:"tittle-modal-more",on:{click:t.consol}},[t._v("Agregar producto")]),a("div",{staticClass:"more-products-inputs"},[t._m(0),t._m(1),a("div",{staticClass:"category-div"},[a("h3",[t._v("Seleccionar categoria")]),a("select",t._l(t.categories,(function(e,r){return a("option",{key:r,domProps:{value:[e]}},[t._v(t._s(e))])})),0)]),a("h3",[t._v("Seleccionar imagen")]),a("div",{staticClass:"input-group mb-4 upload-container"},[a("div",{staticClass:"charge-div",style:{width:t.percentajeWidth}}),"100%"!=t.percentaje?a("h5",[t._v(t._s(t.percentaje))]):t._e(),"100%"!==t.percentaje||t.readyImg?t._e():a("h5",[t._v("Aguarde...")]),t.readyImg?a("h5",[t._v("Imagen cargada")]):t._e(),a("input",{attrs:{type:"file"},on:{change:t.uploadImage}})])]),a("div",{staticClass:"div-add-products d-flex mb-4"},[a("button",{on:{click:t.addNewProduct}},[t._v("Agregar producto")])]),t.showError?a("ErrorMessage",{attrs:{message:"Complete los campos",close:t.quitError}}):t._e(),a("button",{staticClass:"icon exit exit-modal-add",on:{click:t.hide}})],1):t._e()},v=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-floating mb-3 mt-3 input-more"},[a("input",{staticClass:"form-control",attrs:{name:"nameProduct",type:"text",id:"floatingInput",placeholder:"Milanesa con papas"}}),a("label",{attrs:{for:"floatingInput"}},[t._v("Nombre producto")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-floating input-more mb-4"},[a("input",{staticClass:"form-control",attrs:{name:"priceProduct",type:"number",id:"floatingPassword",placeholder:"Price"}}),a("label",{attrs:{for:"floatingPassword"}},[t._v("Precio")])])}],p=a(8155),f={name:"MoreProducts",props:["show","hide","resto","refresh"],components:{ErrorMessage:p.Z},data(){let t="",e="Seleccionar Archivo",a=[],r="0%",s=!1,i=["Hamburguesas","Bebidas","Helados","Vegana","Pizzas","Milanesas","Carnes","Sushi","Kiosco","Mascotas"],o=!1;return{imgLink:t,percentaje:e,restoArray:a,percentajeWidth:r,categories:i,showError:o,readyImg:s}},methods:{uploadImage:async function(){var t=document.querySelector("input[type='file']"),e=(new Date).getTime();let a=t.files[0];try{let t=firebase.storage().ref(`images/${e}`),r=t.put(a);r.on("state_changed",(t=>{this.percentaje=t.bytesTransferred/t.totalBytes*100+"%",this.percentajeWidth=t.bytesTransferred/t.totalBytes*100+"%"})),r.on("load",(e=>{t.getDownloadURL().then((t=>{this.readyImg=!0,console.log(t),this.imgLink=t}))}))}catch(r){console.log(r)}},consol:function(){console.log(this.imgLink)},addNewProduct:function(){let t=document.querySelector("input[name='priceProduct']"),e=document.querySelector("input[name='nameProduct']"),a=document.querySelector("select");""!=t.value&&""!=e.value&&""!=this.imgLink?(this.restoArray=this.resto,this.restoArray.push({nombre:e.value,costo:parseInt(t.value),img:this.imgLink,categoria:a.value}),console.log(this.restoArray),firebase.database().ref(`restaurantes/${this.restoArray[0]}`).set(this.restoArray),this.refresh(),this.hide()):this.showError=!0},quitError:function(){this.showError=!1}}},g=f,b=(0,d.Z)(g,m,v,!1,null,"1fe27c1e",null),y=b.exports,_={name:"PartnerIndex",components:{PartnerNav:i.Z,itemEdit:h,MoreProducts:y},data(){let t=[],e=[],a=!1,r={},s="";return{food:t,drinks:e,showMoreProducts:a,restoObject:r,user:s}},methods:{completePage:function(t){firebase.database().ref(`restaurantes/${t}`).on("value",(t=>{let e=Object.values(t.val());this.restoObject=t.val(),this.food=[],this.drinks=[],e.forEach((t=>{"Bebidas"!=t.categoria&&null!=t.categoria?this.food.push(t):"Bebidas"===t.categoria&&this.drinks.push(t)}))})),console.log(this.user)},hideMoreProducts:function(){let t=document.querySelector(".modal-more-products");t.style.animation="closeCart .5s",window.setTimeout((t=>{this.showMoreProducts=!1}),400)},isLogin:function(){firebase.auth().onAuthStateChanged((t=>{t?firebase.database().ref("USERSrestaurantes").on("value",(e=>{var a=e.val(),r=!1;a.forEach((e=>{if(e.mail.toLowerCase()===t.email){this.user=t,this.isLogin=!0,r=!0;var a=t.displayName.split(" ").join("");this.completePage(a)}})),r||this.$router.push("/PartnerLogin")})):this.$router.push("/PartnerLogin")}))}},mounted(){this.isLogin()}},C=_,P=(0,d.Z)(C,r,s,!1,null,null,null),k=P.exports}}]);
//# sourceMappingURL=490.be048809.js.map