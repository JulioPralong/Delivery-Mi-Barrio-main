"use strict";(self["webpackChunkdelivery_vue"]=self["webpackChunkdelivery_vue"]||[]).push([[72],{7845:function(t,a,e){e.d(a,{Z:function(){return h}});var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.isReject?t._e():e("article",{staticClass:"article-ask-business mt-4"},[e("div",{staticClass:"accordion",attrs:{id:"accordionExample"}},[e("div",{staticClass:"accordion-item"},[e("h2",{staticClass:"accordion-header",attrs:{id:["heading"+t.ask.numObject.tittle]}},[e("button",{staticClass:"accordion-button collapsed",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":["#collapse"+t.ask.numObject.tittle],"aria-expanded":"false","aria-controls":["collapse"+t.ask.numObject.tittle]}},[e("h1",[t._v("Pedidos")])])]),e("div",{staticClass:"accordion-collapse collapse",attrs:{id:["collapse"+t.ask.numObject.tittle],"aria-labelledby":["heading"+t.ask.numObject.tittle],"data-bs-parent":"#accordionExample"}},[e("div",{staticClass:"accordion-body"},t._l(t.ask.pedido,(function(a,s){return e("h2",{key:s,staticClass:"h2-productName"},[t._v(" "+t._s(a.productName)+" "),1===a.productQuantity?e("span",{staticClass:"spanTittle"},[t._v(" ("+t._s(a.productQuantity)+" unidad)")]):e("span",{staticClass:"spanTittle"},[t._v(" ("+t._s(a.productQuantity)+" unidades) ")])])})),0)])]),0!=t.notes.length?e("div",{staticClass:"accordion-item"},[e("h2",{staticClass:"accordion-header",attrs:{id:["heading"+t.ask.numObject.notes]}},[e("button",{staticClass:"accordion-button collapsed",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":["#collapse"+t.ask.numObject.notes],"aria-expanded":"false","aria-controls":["collapse"+t.ask.numObject.notes]}},[e("h3",[t._v("Notas")])])]),e("div",{staticClass:"accordion-collapse collapse",attrs:{id:["collapse"+t.ask.numObject.notes],"aria-labelledby":["heading"+t.ask.numObject.notes],"data-bs-parent":"#accordionExample"}},[e("div",{staticClass:"accordion-body accordion-notes"},t._l(t.notes,(function(a,s){return e("p",{key:s,staticClass:"notes-p"},[e("span",{staticClass:"spanTittle"},[t._v(" "+t._s(a.product)+" ")]),t._v(t._s(a.note))])})),0)])]):t._e()]),e("div",{staticClass:"notes-ask-business"},[e("p",[t._v("Repartidor")]),void 0!=t.ask.riderName||null!=t.ask.riderName?e("p",[t._v(t._s(t.ask.riderName))]):e("p",[t._v("No aceptado aún")])]),e("div",{staticClass:"total-price-ask-business"},[e("p",[t._v("Total")]),e("p",[t._v("$"+t._s(t.ask.riderDbt))])]),e("PartnerAceptReject",{attrs:{reject:t.rejectAsk,ask:t.askObj}})],1)},n=[],i=(e(2222),e(1539),e(4747),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.noChoice&&!t.finalized?e("div",{staticClass:"acept-div"},[e("button",{staticClass:"reject",on:{click:t.reject}},[t._v("Rechazar")]),e("button",{staticClass:"acept",on:{click:t.acept}},[t._v("Aceptar")])]):t._e(),t.acepted&&!t.finalized?e("div",{staticClass:"acept-div"},[e("button",{staticClass:"acept"},[t._v("Aceptado")])]):t._e(),t.finalized?e("div",{staticClass:"acept-div"},[e("button",{staticClass:"acept"},[t._v("Entregado")])]):t._e()])}),o=[],r={name:"PartnerAceptReject",data:function(){var t=!0,a=!1,e=!1;return{noChoice:t,acepted:a,finalized:e}},props:["reject","ask"],methods:{acept:function(){var t=this.ask;t.estado="Buscando repartidores",t.aceptado=!0,firebase.database().ref("pedidos/".concat(this.ask.clientID,"/").concat(this.ask.askID)).set(t),this.acepted=!0,this.noChoice=!1},isAcept:function(){var t=this;window.setTimeout((function(a){firebase.database().ref("pedidos/".concat(t.ask.clientID,"/").concat(t.ask.askID)).on("value",(function(a){!0===a.val().aceptado&&null!=a.val().aceptado&&(t.acepted=!0,t.noChoice=!1),"Entregado"!==a.val().estado&&"Retirado del local, en camino"!==a.val().estado||(t.finalized=!0)}))}),10)}},mounted:function(){this.isAcept()}},c=r,l=e(1001),d=(0,l.Z)(c,i,o,!1,null,null,null),u=d.exports,v={name:"PartnerAsk",components:{PartnerAceptReject:u},data:function(){var t=!1,a=[],e=0,s={};return{isReject:t,notes:a,price:e,askObj:s}},props:["refresh","ask"],methods:{rejectAsk:function(){var t=this.ask;t.estado="Rechazado por el local",firebase.database().ref("pedidos/".concat(this.ask.clientID,"/").concat(this.ask.askID)).set(t),this.isReject=!0,this.refresh()},askItem:function(){console.log(this.ask)},filtrerAndOperations:function(){var t=this;this.price=0,null!=this.ask&&void 0!=this.ask&&this.ask.pedido.forEach((function(a){if(null!=a.userNotes&&void 0!=a.userNotes&&""!=a.userNotes){var e={note:a.userNotes,product:a.productName};t.notes.push(e)}t.price+=parseInt(a.productPrice)*parseInt(a.productQuantity),t.askObj=t.ask,console.log(t.ask)}))}},mounted:function(){this.askItem(),this.filtrerAndOperations()}},f=v,p=(0,l.Z)(f,s,n,!1,null,"2b70d94c",null),h=p.exports},5389:function(t,a,e){e.d(a,{Z:function(){return l}});var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("nav",{staticClass:"navbar navbar-light fixed-top"},[e("div",{staticClass:"container-fluid"},[e("h2",{staticClass:"navbar-brand"},[t._v(t._s(t.tittle))]),t._m(0),e("div",{staticClass:"offcanvas offcanvas-end",staticStyle:{visibility:"hidden"},attrs:{tabindex:"-1",id:"offcanvasNavbar","aria-labelledby":"offcanvasNavbarLabel","aria-hidden":"true"}},[t._m(1),e("div",{staticClass:"nav-container-partner"},[e("ul",{staticClass:"navbar-nav mt-4"},[e("li",{staticClass:"nav-item",on:{click:function(a){return t.goTo("product")}}},[e("div",{staticClass:"icon home"}),e("a",{staticClass:"nav-link",attrs:{"aria-current":"page"}},[t._v("Productos")])]),e("li",{staticClass:"nav-item",on:{click:function(a){return t.goTo("asks")}}},[e("div",{staticClass:"icon ask"}),e("a",{staticClass:"nav-link"},[t._v("Pedidos")])]),e("li",{staticClass:"nav-item padding-correction",on:{click:function(a){return t.goTo("history")}}},[e("div",{staticClass:"icon history"}),e("a",{staticClass:"nav-link"},[t._v("Historial")])])]),e("div",{staticClass:"logOutContainer",attrs:{"data-v-79df3b98":""}},[e("button",{attrs:{"data-v-79df3b98":""},on:{click:t.logOut}},[e("span",{attrs:{"data-v-79df3b98":""}},[t._v("Cerrar Sesión")])])])])])])])},n=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasNavbar","aria-controls":"offcanvasNavbar"}},[e("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"offcanvas-header"},[e("h5",{staticClass:"offcanvas-title",attrs:{id:"offcanvasNavbarLabel"}},[t._v("Mi Barrio")]),e("button",{staticClass:"btn-close text-reset",attrs:{type:"button","data-bs-dismiss":"offcanvas","aria-label":"Close"}})])}],i={name:"PartnerNav",props:["tittle"],methods:{goTo:function(t){"product"===t?this.$router.push({name:"partnerIndex"}):"history"===t?this.$router.push({name:"PartnerHistory"}):"asks"===t&&this.$router.push({name:"PartnerAsks"})},overflowSolve:function(){var t=document.querySelector("#offcanvasNavbar"),a=document.querySelector("body");"visible"!=t.style.visibility&&(a.style.overflow="auto")},logOut:function(){var t=this;firebase.auth().signOut().then((function(){t.$router.push("/PartnerLogin")})).catch((function(t){console.log("Ocurrio un error, el error es ".concat(t))}))}},mounted:function(){this.overflowSolve()}},o=i,r=e(1001),c=(0,r.Z)(o,s,n,!1,null,"061afba2",null),l=c.exports},4072:function(t,a,e){e.r(a),e.d(a,{default:function(){return u}});var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("header",[e("PartnerNav",{attrs:{tittle:"Pedidos"}})],1),e("section",{staticClass:"d-flex sectionContainer section-container"},[t._l(t.asks,(function(a,s){return e("PartnerAsk",{key:s,attrs:{refresh:t.refreshPage,ask:a}})})),0===t.asks.length?e("article",{staticClass:"article-ask-business mt-4"},[e("h2",[t._v("No hay pedidos para mostrar")])]):t._e()],2)])},n=[],i=(e(1539),e(4747),e(2479),e(9600),e(4916),e(3123),e(6699),e(5389)),o=e(7845),r={name:"PartnerAsks",components:{PartnerNav:i.Z,PartnerAsk:o.Z},data:function(){var t=!1,a=!1,e={},s=[];return{isReject:t,noAskToShow:a,user:e,asks:s}},methods:{refreshPage:function(){var t=this,a=document.querySelector("section");window.setTimeout((function(e){0===a.children.length&&(t.noAskToShow=!0)}),10)},isLogin:function(){var t=this;firebase.auth().onAuthStateChanged((function(a){a?firebase.database().ref("USERSrestaurantes").on("value",(function(e){var s=e.val(),n=!1;s.forEach((function(e){e.mail.toLowerCase()===a.email&&(t.user=a,t.isLogin=!0,n=!0)})),n||t.$router.push("/PartnerLogin")})):t.$router.push("/PartnerLogin")}))},returnAsks:function(){var t=this;firebase.auth().onAuthStateChanged((function(a){a&&(t.user=a,firebase.database().ref("pedidos").on("value",(function(e){var s=[];null!=e.val()&&void 0!=e.val()&&Object.values(e.val()).forEach((function(t){Object.values(t).forEach((function(t){t.restaurant===a.displayName.split(" ").join("")&&"Retirado del local, en camino"!=t.estado&&"Entregado"!=t.estado&&"Rechazado por el local"!=t.estado&&s.push(t)}))}));var n=[];if(0!=s.length)for(;;){var i=parseInt(100*Math.random());if(n.includes(i)||n.push(i),parseInt(3*s.length)===n.length)break}for(var o=0;o<s.length;o++){var r={tittle:n[o],notes:""};s[o].numObject=r}var c=0;for(o=s.length;o<3*n.length;o++){if(c++,void 0===s[c]||null===s[c])break;s[c].numObject.notes=n[o]}console.log(s),t.asks=s})))}))}},mounted:function(){this.isLogin(),this.returnAsks()}},c=r,l=e(1001),d=(0,l.Z)(c,s,n,!1,null,null,null),u=d.exports},6699:function(t,a,e){var s=e(2109),n=e(1318).includes,i=e(1223);s({target:"Array",proto:!0},{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")}}]);
//# sourceMappingURL=72-legacy.a3649236.js.map