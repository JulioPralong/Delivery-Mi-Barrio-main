"use strict";(self["webpackChunkdelivery_vue"]=self["webpackChunkdelivery_vue"]||[]).push([[898],{7845:function(t,a,s){s.d(a,{Z:function(){return h}});var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return t.isReject?t._e():s("article",{staticClass:"article-ask-business mt-4"},[s("div",{staticClass:"accordion",attrs:{id:"accordionExample"}},[s("div",{staticClass:"accordion-item"},[s("h2",{staticClass:"accordion-header",attrs:{id:["heading"+t.ask.numObject.tittle]}},[s("button",{staticClass:"accordion-button collapsed",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":["#collapse"+t.ask.numObject.tittle],"aria-expanded":"false","aria-controls":["collapse"+t.ask.numObject.tittle]}},[s("h1",[t._v("Pedidos")])])]),s("div",{staticClass:"accordion-collapse collapse",attrs:{id:["collapse"+t.ask.numObject.tittle],"aria-labelledby":["heading"+t.ask.numObject.tittle],"data-bs-parent":"#accordionExample"}},[s("div",{staticClass:"accordion-body"},t._l(t.ask.pedido,(function(a,e){return s("h2",{key:e,staticClass:"h2-productName"},[t._v(" "+t._s(a.productName)+" "),1===a.productQuantity?s("span",{staticClass:"spanTittle"},[t._v(" ("+t._s(a.productQuantity)+" unidad)")]):s("span",{staticClass:"spanTittle"},[t._v(" ("+t._s(a.productQuantity)+" unidades) ")])])})),0)])]),0!=t.notes.length?s("div",{staticClass:"accordion-item"},[s("h2",{staticClass:"accordion-header",attrs:{id:["heading"+t.ask.numObject.notes]}},[s("button",{staticClass:"accordion-button collapsed",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":["#collapse"+t.ask.numObject.notes],"aria-expanded":"false","aria-controls":["collapse"+t.ask.numObject.notes]}},[s("h3",[t._v("Notas")])])]),s("div",{staticClass:"accordion-collapse collapse",attrs:{id:["collapse"+t.ask.numObject.notes],"aria-labelledby":["heading"+t.ask.numObject.notes],"data-bs-parent":"#accordionExample"}},[s("div",{staticClass:"accordion-body accordion-notes"},t._l(t.notes,(function(a,e){return s("p",{key:e,staticClass:"notes-p"},[s("span",{staticClass:"spanTittle"},[t._v(" "+t._s(a.product)+" ")]),t._v(t._s(a.note))])})),0)])]):t._e()]),s("div",{staticClass:"notes-ask-business"},[s("p",[t._v("Repartidor")]),void 0!=t.ask.riderName||null!=t.ask.riderName?s("p",[t._v(t._s(t.ask.riderName))]):s("p",[t._v("No aceptado aún")])]),s("div",{staticClass:"total-price-ask-business"},[s("p",[t._v("Total")]),s("p",[t._v("$"+t._s(t.ask.riderDbt))])]),s("PartnerAceptReject",{attrs:{reject:t.rejectAsk,ask:t.askObj}})],1)},n=[],i=(s(2222),s(1539),s(4747),function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[t.noChoice&&!t.finalized?s("div",{staticClass:"acept-div"},[s("button",{staticClass:"reject",on:{click:t.reject}},[t._v("Rechazar")]),s("button",{staticClass:"acept",on:{click:t.acept}},[t._v("Aceptar")])]):t._e(),t.acepted&&!t.finalized?s("div",{staticClass:"acept-div"},[s("button",{staticClass:"acept"},[t._v("Aceptado")])]):t._e(),t.finalized?s("div",{staticClass:"acept-div"},[s("button",{staticClass:"acept"},[t._v("Entregado")])]):t._e()])}),o=[],r={name:"PartnerAceptReject",data:function(){var t=!0,a=!1,s=!1;return{noChoice:t,acepted:a,finalized:s}},props:["reject","ask"],methods:{acept:function(){var t=this.ask;t.estado="Buscando repartidores",t.aceptado=!0,firebase.database().ref("pedidos/".concat(this.ask.clientID,"/").concat(this.ask.askID)).set(t),this.acepted=!0,this.noChoice=!1},isAcept:function(){var t=this;window.setTimeout((function(a){firebase.database().ref("pedidos/".concat(t.ask.clientID,"/").concat(t.ask.askID)).on("value",(function(a){!0===a.val().aceptado&&null!=a.val().aceptado&&(t.acepted=!0,t.noChoice=!1),"Entregado"!==a.val().estado&&"Retirado del local, en camino"!==a.val().estado||(t.finalized=!0)}))}),10)}},mounted:function(){this.isAcept()}},c=r,l=s(1001),d=(0,l.Z)(c,i,o,!1,null,null,null),u=d.exports,v={name:"PartnerAsk",components:{PartnerAceptReject:u},data:function(){var t=!1,a=[],s=0,e={};return{isReject:t,notes:a,price:s,askObj:e}},props:["refresh","ask"],methods:{rejectAsk:function(){var t=this.ask;t.estado="Rechazado por el local",firebase.database().ref("pedidos/".concat(this.ask.clientID,"/").concat(this.ask.askID)).set(t),this.isReject=!0,this.refresh()},askItem:function(){console.log(this.ask)},filtrerAndOperations:function(){var t=this;this.price=0,null!=this.ask&&void 0!=this.ask&&this.ask.pedido.forEach((function(a){if(null!=a.userNotes&&void 0!=a.userNotes&&""!=a.userNotes){var s={note:a.userNotes,product:a.productName};t.notes.push(s)}t.price+=parseInt(a.productPrice)*parseInt(a.productQuantity),t.askObj=t.ask,console.log(t.ask)}))}},mounted:function(){this.askItem(),this.filtrerAndOperations()}},f=v,p=(0,l.Z)(f,e,n,!1,null,"2b70d94c",null),h=p.exports},5389:function(t,a,s){s.d(a,{Z:function(){return l}});var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("nav",{staticClass:"navbar navbar-light fixed-top"},[s("div",{staticClass:"container-fluid"},[s("h2",{staticClass:"navbar-brand"},[t._v(t._s(t.tittle))]),t._m(0),s("div",{staticClass:"offcanvas offcanvas-end",staticStyle:{visibility:"hidden"},attrs:{tabindex:"-1",id:"offcanvasNavbar","aria-labelledby":"offcanvasNavbarLabel","aria-hidden":"true"}},[t._m(1),s("div",{staticClass:"nav-container-partner"},[s("ul",{staticClass:"navbar-nav mt-4"},[s("li",{staticClass:"nav-item",on:{click:function(a){return t.goTo("product")}}},[s("div",{staticClass:"icon home"}),s("a",{staticClass:"nav-link",attrs:{"aria-current":"page"}},[t._v("Productos")])]),s("li",{staticClass:"nav-item",on:{click:function(a){return t.goTo("asks")}}},[s("div",{staticClass:"icon ask"}),s("a",{staticClass:"nav-link"},[t._v("Pedidos")])]),s("li",{staticClass:"nav-item padding-correction",on:{click:function(a){return t.goTo("history")}}},[s("div",{staticClass:"icon history"}),s("a",{staticClass:"nav-link"},[t._v("Historial")])])]),s("div",{staticClass:"logOutContainer",attrs:{"data-v-79df3b98":""}},[s("button",{attrs:{"data-v-79df3b98":""},on:{click:t.logOut}},[s("span",{attrs:{"data-v-79df3b98":""}},[t._v("Cerrar Sesión")])])])])])])])},n=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasNavbar","aria-controls":"offcanvasNavbar"}},[s("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"offcanvas-header"},[s("h5",{staticClass:"offcanvas-title",attrs:{id:"offcanvasNavbarLabel"}},[t._v("Mi Barrio")]),s("button",{staticClass:"btn-close text-reset",attrs:{type:"button","data-bs-dismiss":"offcanvas","aria-label":"Close"}})])}],i={name:"PartnerNav",props:["tittle"],methods:{goTo:function(t){"product"===t?this.$router.push({name:"partnerIndex"}):"history"===t?this.$router.push({name:"PartnerHistory"}):"asks"===t&&this.$router.push({name:"PartnerAsks"})},overflowSolve:function(){var t=document.querySelector("#offcanvasNavbar"),a=document.querySelector("body");"visible"!=t.style.visibility&&(a.style.overflow="auto")},logOut:function(){var t=this;firebase.auth().signOut().then((function(){t.$router.push("/PartnerLogin")})).catch((function(t){console.log("Ocurrio un error, el error es ".concat(t))}))}},mounted:function(){this.overflowSolve()}},o=i,r=s(1001),c=(0,r.Z)(o,e,n,!1,null,"061afba2",null),l=c.exports},5898:function(t,a,s){s.r(a),s.d(a,{default:function(){return u}});var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("header",[s("PartnerNav",{attrs:{tittle:"Historial"}})],1),s("section",{staticClass:"d-flex flex-column section-container"},[t._l(t.asks,(function(a,e){return s("PartnerAsk",{key:e,attrs:{refresh:t.refresh,ask:a}})})),0===t.asks.length?s("article",{staticClass:"article-ask-business mt-4"},[s("h2",[t._v("No hay pedidos para mostrar")])]):t._e()],2)])},n=[],i=(s(1539),s(4747),s(2479),s(9600),s(4916),s(3123),s(6699),s(5389)),o=s(7845),r={name:"PartnerHistory",components:{PartnerNav:i.Z,PartnerAsk:o.Z},data:function(){var t=!1,a=[];return{noAskToShow:t,asks:a}},methods:{refresh:function(){var t=this;firebase.auth().onAuthStateChanged((function(a){a&&(t.user=a,firebase.database().ref("pedidos").on("value",(function(s){var e=[];Object.values(s.val()).forEach((function(t){Object.values(t).forEach((function(t){t.restaurant!==a.displayName.split(" ").join("")||"Retirado del local, en camino"!==t.estado&&"Entregado"!==t.estado||"Rechazado por el local"==t.estado||e.push(t)}))}));var n=[];if(0!=e.length)for(;;){var i=parseInt(100*Math.random());if(n.includes(i)||n.push(i),parseInt(3*e.length)===n.length)break}for(var o=0;o<e.length;o++){var r={tittle:n[o],notes:""};e[o].numObject=r}var c=0;for(o=e.length;o<3*n.length;o++){if(c++,void 0===e[c]||null===e[c])break;e[c].numObject.notes=n[o]}t.asks=e})))}))},isLogin:function(){var t=this;firebase.auth().onAuthStateChanged((function(a){a?firebase.database().ref("USERSrestaurantes").on("value",(function(s){var e=s.val(),n=!1;e.forEach((function(s){s.mail.toLowerCase()===a.email&&(t.user=a,t.isLogin=!0,n=!0)})),n||t.$router.push("/PartnerLogin")})):t.$router.push("/PartnerLogin")}))}},mounted:function(){this.isLogin(),this.refresh()}},c=r,l=s(1001),d=(0,l.Z)(c,e,n,!1,null,null,null),u=d.exports},6699:function(t,a,s){var e=s(2109),n=s(1318).includes,i=s(1223);e({target:"Array",proto:!0},{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")}}]);
//# sourceMappingURL=898-legacy.4be3fbb9.js.map